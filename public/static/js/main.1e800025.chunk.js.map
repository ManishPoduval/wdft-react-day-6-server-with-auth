{"version":3,"sources":["components/MyNav.js","components/TodoList.js","config.js","components/TodoDetail.js","components/AddForm.js","components/EditForm.js","components/SignIn.js","components/SignUp.js","App.js","index.js"],"names":["MyNav","props","user","onLogout","Navbar","bg","expand","Toggle","aria-controls","Collapse","id","Nav","className","to","style","marginLeft","onClick","TodoList","todos","this","map","todo","_id","name","Component","process","TodoDetail","state","console","log","todoId","match","params","axios","get","config","withCredentials","then","response","setState","data","catch","onDelete","description","AddForm","onSubmit","onAdd","type","placeholder","EditForm","handleNameChange","event","text","target","value","cloneTodo","JSON","parse","stringify","handleDescChange","onEdit","onChange","SignIn","onSignIn","error","htmlFor","color","SignUp","App","fetchingUser","handleSignUp","e","preventDefault","username","email","password","newUser","post","history","push","handleSignIn","a","errorObj","handleLogout","handleSubmit","completed","err","handleDelete","delete","filteredTodos","filter","handleEditTodo","patch","newTodos","singleTodo","exact","path","render","routeProps","withRouter","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1e800025.chunk.js","sourcesContent":["import React from  'react'\r\nimport {Navbar, Nav} from  'react-bootstrap'\r\nimport {Link} from  'react-router-dom'\r\n\r\nfunction MyNav(props) {\r\n  const { user, onLogout } = props\r\n  return (\r\n    <Navbar  bg=\"light\"  expand=\"lg\">\r\n      <Navbar.Toggle  aria-controls=\"basic-navbar-nav\"  />\r\n      <Navbar.Collapse  id=\"basic-navbar-nav\">\r\n        <Nav  className=\"mr-auto\">\r\n          <Link to=\"/\">Todos</Link>\r\n          <Link  style={{marginLeft: '10px'}}  to=\"/add-form\">Add Todo</Link>\r\n          {\r\n            user ? (\r\n              <button onClick={onLogout} >Logout</button>\r\n            ) : (\r\n              <>\r\n                <Link  style={{marginLeft: '10px'}}  to=\"/signin\">SignIn</Link>\r\n                <Link  style={{marginLeft: '10px'}}  to=\"/signup\">SignUp</Link>\r\n              </>\r\n            )\r\n          }\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n    )\r\n}\r\nexport default MyNav","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport default class TodoList extends Component {\r\n  /*\r\n    this.props = {\r\n      todos: Array\r\n    }\r\n  */\r\n  render() {\r\n    const {todos} = this.props\r\n    return (\r\n      <div>\r\n          <h4>My Todos</h4>\r\n          {\r\n            todos.map((todo) => {\r\n              return <Link key={todo._id} to={`/todos/${todo._id}`}>\r\n                <div >{todo.name}</div>\r\n                </Link>\r\n            })\r\n          }\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n","export default {\r\n\tAPI_URL: process.env.REACT_APP_SERVER_URL\r\n}","import axios from 'axios'\r\nimport React, { Component } from 'react'\r\nimport config from '../config'\r\nimport {Link, Redirect} from 'react-router-dom'\r\n\r\nexport default class TodoDetail extends Component {\r\n\r\n  state = {\r\n    todo: {}\r\n  }\r\n\r\n  componentDidMount(){\r\n    console.log(this.props) \r\n \r\n   let todoId = this.props.match.params.todoId\r\n    axios.get(`${config.API_URL}/api/todos/${todoId}`, {withCredentials: true})\r\n      .then((response) => {\r\n        this.setState({ todo: response.data })\r\n      })\r\n      .catch(() => {\r\n        console.log('Detail fecth failed')\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const {todo} = this.state\r\n    const {onDelete, user} = this.props\r\n    console.log(this.props)\r\n\r\n    if(!user){\r\n      return <Redirect to={'/signin'} />\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h4>Details are:</h4>\r\n        <div>Name: {todo.name}</div>\r\n        <div>Description: {todo.description}</div>\r\n        <Link to={`/todo/${todo._id}/edit`}>\r\n          <button>Edit</button>\r\n        </Link>\r\n        <button onClick={() => { onDelete(todo._id)  } } >Delete</button>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nclass AddForm extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.onAdd}>\r\n        <input name=\"name\" type=\"text\" placeholder=\"Enter name\"/>\r\n        <input name=\"description\" type=\"text\" placeholder=\"Enter desc\"/>\r\n        <button type=\"submit\" >Submit</button>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default AddForm","import axios from 'axios'\r\nimport React, { Component } from 'react'\r\nimport config from '../config'\r\n\r\nexport default class EditForm extends Component {\r\n\r\n  state = {\r\n    todo: {}\r\n  }\r\n\r\n  componentDidMount(){\r\n    let todoId = this.props.match.params.todoId\r\n    axios.get(`${config.API_URL}/api/todos/${todoId}`)\r\n      .then((response) => {\r\n        this.setState({\r\n          todo: response.data\r\n        })\r\n      })\r\n      .catch(() => {\r\n        console.log('Detail fecth failed')\r\n      })\r\n  }\r\n\r\n  handleNameChange = (event) => {\r\n    let text = event.target.value\r\n    console.log(text)\r\n    let cloneTodo = JSON.parse(JSON.stringify(this.state.todo))\r\n    cloneTodo.name = text\r\n\r\n    this.setState({\r\n      todo: cloneTodo\r\n    })\r\n  }\r\n\r\n  handleDescChange = (event) => {\r\n    let text = event.target.value\r\n    let cloneTodo = JSON.parse(JSON.stringify(this.state.todo))\r\n    cloneTodo.description = text\r\n\r\n    this.setState({\r\n      todo: cloneTodo\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {todo} = this.state\r\n    const {onEdit} = this.props\r\n    return (\r\n      <div>\r\n          <input type=\"text\" onChange={this.handleNameChange} value={todo.name}/>\r\n          <input type=\"text\" onChange={this.handleDescChange} value={todo.description}/>\r\n          <button onClick={ () => { onEdit(todo) } }  >Submit</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nfunction SignIn(props){\r\n\r\n    const { onSignIn, error } = props\r\n    return (\r\n        <form onSubmit={onSignIn}>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"InputEmail\">Email address</label>\r\n                <input type=\"email\" className=\"form-control\" id=\"InputEmail\" name=\"email\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"InputPassword\">Password</label>\r\n                <input name=\"password\" type=\"password\" className=\"form-control\" id=\"InputPassword\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            {\r\n                error && (<p style={{color:'red'}}>{error.error}</p>)\r\n            }\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SignIn","import axios from 'axios';\r\nimport React from 'react';\r\n\r\nfunction SignUp(props){\r\n\r\n    const { onSubmit } = props\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"InputUsername\">Username</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"InputUsername\" name=\"username\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"InputEmail\">Email address</label>\r\n                <input type=\"email\" className=\"form-control\" id=\"InputEmail\" name=\"email\" />\r\n                <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"InputPassword\">Password</label>\r\n                <input name=\"password\" type=\"password\" className=\"form-control\" id=\"InputPassword\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SignUp","import React, { Component } from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport MyNav from './components/MyNav'\r\nimport { Route, Switch, withRouter } from 'react-router-dom'\r\nimport TodoList from './components/TodoList'\r\nimport axios from 'axios'\r\nimport config from './config'\r\nimport TodoDetail from './components/TodoDetail'\r\nimport AddForm from './components/AddForm'\r\nimport EditForm from './components/EditForm'\r\nimport SignIn from './components/SignIn'\r\nimport SignUp from './components/SignUp'\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    todos: [],\r\n    user: null,\r\n    error: null,\r\n    fetchingUser: true, \r\n  }\r\n\r\n  handleSignUp = (e) => {\r\n    e.preventDefault()\r\n    const {username, email , password} = e.target\r\n    let newUser = {\r\n      username: username.value, \r\n      email: email.value, \r\n      password: password.value\r\n    }\r\n    \r\n    axios.post(`${config.API_URL}/api/signup`, newUser, {withCredentials: true})\r\n      .then((response) => {\r\n        //the real data is always in response.data\r\n          this.setState({\r\n            user: response.data //save the user info in the state\r\n          }, () => {\r\n              //Redirect after the user info has been fetched\r\n              this.props.history.push('/')\r\n          })\r\n      })\r\n      .catch(() => {\r\n        console.log('SignUp failed')\r\n      })\r\n  }\r\n\r\n  handleSignIn = async (e) => {\r\n    e.preventDefault()\r\n    const { email , password} = e.target\r\n    let newUser = {\r\n      email: email.value, \r\n      password: password.value\r\n    }\r\n\r\n    axios.post(`${config.API_URL}/api/signin`, newUser, {withCredentials: true})\r\n      .then((response) => {\r\n        this.setState({\r\n          user: response.data,\r\n          error: null\r\n        }, () => {\r\n          this.props.history.push('/')\r\n        })\r\n      })\r\n      .catch((errorObj) => {\r\n        this.setState({\r\n          error: errorObj.response.data\r\n        })\r\n      })\r\n  }\r\n\r\n  // ---------------------SIGN IN WITH ASYNC AWAIT----------------------\r\n  // -------------------COMPLETELY OPTIONAL------------------------------\r\n  //-----------DONT FREAK OUT READING THE CODE OK? ---------------------------\r\n  /*\r\n  handleSignIn = async (e) => {\r\n    e.preventDefault()\r\n    const { email , password} = e.target\r\n    let newUser = {\r\n      email: email.value, \r\n      password: password.value\r\n    }\r\n    try {\r\n      let response = await axios.post(`${config.API_URL}/api/signin`, newUser, {withCredentials: true})\r\n      this.setState({\r\n        user: response.data,\r\n        error: null\r\n      }, this.props.history.push('/'))\r\n    }\r\n    catch(errorObj){\r\n      this.setState({\r\n        error: errorObj.response.data\r\n      })\r\n    }\r\n  }\r\n  */\r\n\r\n  handleLogout = () => {\r\n      axios.post(`${config.API_URL}/api/logout`, {}, {withCredentials: true})\r\n        .then(() => {\r\n          this.setState({\r\n            user: null\r\n          })\r\n        })\r\n        .catch((errorObj) => {\r\n          // the real error json is always is the .response.data \r\n          this.setState({\r\n            error: errorObj.response.data\r\n          })\r\n      })\r\n  }\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    let name = event.target.name.value\r\n    let description = event.target.description.value\r\n\r\n    //1. Make an API call to the server side Route to create a new todo\r\n    axios.post(`${config.API_URL}/api/create`, {\r\n      name: name,\r\n      description: description,\r\n      completed: false,\r\n    }, {withCredentials: true})\r\n      .then((response) => {\r\n          // 2. Once the server has successfully created a new todo, update your state that is visible to the user\r\n          this.setState({\r\n            todos: [response.data, ...this.state.todos]\r\n          }, () => {\r\n            //3. Once the state is update, redirect the user to the home page\r\n            this.props.history.push('/')\r\n          })\r\n\r\n      })\r\n      .catch((err) => {\r\n        console.log('Create failed', err)\r\n      })\r\n  }\r\n\r\n  handleDelete = (todoId) => {\r\n    //1. Make an API call to the server side Route to delete that specific todo\r\n    axios.delete(`${config.API_URL}/api/todos/${todoId}`, {withCredentials: true})\r\n      .then(() => {\r\n         // 2. Once the server has successfully created a new todo, update your state that is visible to the user\r\n          let filteredTodos = this.state.todos.filter((todo) => {\r\n            return todo._id !== todoId\r\n          })\r\n\r\n          this.setState({\r\n            todos: filteredTodos\r\n          }, () => {\r\n            this.props.history.push('/')\r\n          })\r\n      })\r\n      .catch((err) => {\r\n        console.log('Delete failed', err)\r\n      })\r\n\r\n  }\r\n\r\n  handleEditTodo = (todo) => {\r\n      axios.patch(`${config.API_URL}/api/todos/${todo._id}`, {\r\n        name: todo.name,\r\n        description: todo.description,\r\n        completed: todo.completed,\r\n      }, {withCredentials: true})\r\n        .then(() => {\r\n            let newTodos = this.state.todos.map((singleTodo) => {\r\n                if (todo._id === singleTodo._id) {\r\n                  singleTodo.name  = todo.name\r\n                  singleTodo.description = todo.description\r\n                }\r\n                return singleTodo\r\n            })\r\n            this.setState({\r\n              todos: newTodos\r\n            }, () => {\r\n              this.props.history.push('/')\r\n            })\r\n\r\n            \r\n        })\r\n        .catch((err) => {\r\n          console.log('Edit failed', err)\r\n        })\r\n\r\n  }\r\n\r\n    // Make sure all the initial data that you show to the user is fetched here\r\n  \r\n  componentDidMount(){\r\n      axios.get(`${config.API_URL}/api/todos`, {withCredentials: true})\r\n        .then((response) => {\r\n          console.log(response.data)\r\n          this.setState({ todos: response.data})\r\n        })\r\n        .catch(() => {\r\n          console.log('Fecthing failed')\r\n        })\r\n  \r\n      \r\n      axios.get(`${config.API_URL}/api/user`, {withCredentials: true}) \r\n        .then((response) => {\r\n          this.setState({ \r\n            user: response.data,\r\n            fetchingUser: false,\r\n          })\r\n        })\r\n        .catch((errorObj) => {\r\n          this.setState({\r\n            error: errorObj.response.data,\r\n            fetchingUser: false,\r\n          })\r\n        })\r\n  }\r\n\r\n  \r\n  // -------------------OPTIONAL--------------------------------------------\r\n  // -----------------IN CASE YOU WANT TO USE ASYNC AWAIT ------------------\r\n  // -----------DONT FREAK OUT READING THE CODE OK? ------------------------\r\n\r\n  // Only when you want to run things synchronously\r\n  /*\r\n  async componentDidMount(){\r\n    try{\r\n      let response = await axios.get(`${config.API_URL}/api/todos`, {withCredentials: true})\r\n       this.setState({ todos: response.data})\r\n      let userResponse = await  axios.get(`${config.API_URL}/api/user`, {withCredentials: true}) \r\n      this.setState({ \r\n        user: userResponse.data,\r\n        fetchingUser: false,\r\n      })\r\n    }\r\n    catch(err){\r\n      this.setState({\r\n        error: errorObj.response.data,\r\n        fetchingUser: false,\r\n      })\r\n    }\r\n  }\r\n  */\r\n  \r\n  render() {\r\n    const {todos, error, user, fetchingUser} = this.state\r\n\r\n    // \r\n    if(fetchingUser){\r\n      return <p>Loading . . . </p>\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <MyNav onLogout={this.handleLogout} user={user} />\r\n        <h1>Shopping List</h1>\r\n        <Switch>\r\n            <Route exact path=\"/\" render={() => {\r\n                return <TodoList todos={todos} />\r\n            }} />\r\n            <Route  path=\"/todos/:todoId\" render={(routeProps) => {\r\n                return <TodoDetail user={user} onDelete={this.handleDelete} {...routeProps} />\r\n            }} />\r\n             <Route path=\"/add-form\" render={() => {\r\n                return <AddForm onAdd={this.handleSubmit} />\r\n            }} />\r\n            <Route  path=\"/todo/:todoId/edit\" render={(routeProps) => {\r\n                return <EditForm onEdit={this.handleEditTodo} {...routeProps}/>\r\n            }} />\r\n            <Route  path=\"/signin\"  render={(routeProps) => {\r\n              return  <SignIn error={error} onSignIn={this.handleSignIn}  {...routeProps}  />\r\n            }}/>\r\n            <Route  path=\"/signup\"  render={(routeProps) => {\r\n              return  <SignUp onSubmit={this.handleSignUp} {...routeProps}  />\r\n            }}/>\r\n        </Switch>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(App)\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}