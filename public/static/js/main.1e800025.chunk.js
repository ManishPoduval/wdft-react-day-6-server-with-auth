(this["webpackJsonpReactTodos-client"]=this["webpackJsonpReactTodos-client"]||[]).push([[0],{50:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),c=n(21),r=n.n(c),s=(n(50),n(22)),i=n(45),d=n(28),l=n.n(d),u=n(40),h=n(13),p=n(14),j=n(16),b=n(15),m=(n(52),n(83)),f=n(84),O=n(11),x=n(1);var g=function(t){var e=t.user,n=t.onLogout;return Object(x.jsxs)(m.a,{bg:"light",expand:"lg",children:[Object(x.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsxs)(f.a,{className:"mr-auto",children:[Object(x.jsx)(O.b,{to:"/",children:"Todos"}),Object(x.jsx)(O.b,{style:{marginLeft:"10px"},to:"/add-form",children:"Add Todo"}),e?Object(x.jsx)("button",{onClick:n,children:"Logout"}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.b,{style:{marginLeft:"10px"},to:"/signin",children:"SignIn"}),Object(x.jsx)(O.b,{style:{marginLeft:"10px"},to:"/signup",children:"SignUp"})]})]})})]})},v=n(4),y=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this.props.todos;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"My Todos"}),t.map((function(t){return Object(x.jsx)(O.b,{to:"/todos/".concat(t._id),children:Object(x.jsx)("div",{children:t.name})},t._id)}))]})}}]),n}(a.Component),S=n(8),w=n.n(S),C="https://wdft-march-ironhack.herokuapp.com",N=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={todo:{}},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this;console.log(this.props);var e=this.props.match.params.todoId;w.a.get("".concat(C,"/api/todos/").concat(e),{withCredentials:!0}).then((function(e){t.setState({todo:e.data})})).catch((function(){console.log("Detail fecth failed")}))}},{key:"render",value:function(){var t=this.state.todo,e=this.props,n=e.onDelete,a=e.user;return console.log(this.props),a?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"Details are:"}),Object(x.jsxs)("div",{children:["Name: ",t.name]}),Object(x.jsxs)("div",{children:["Description: ",t.description]}),Object(x.jsx)(O.b,{to:"/todo/".concat(t._id,"/edit"),children:Object(x.jsx)("button",{children:"Edit"})}),Object(x.jsx)("button",{onClick:function(){n(t._id)},children:"Delete"})]}):Object(x.jsx)(v.a,{to:"/signin"})}}]),n}(a.Component),I=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("form",{onSubmit:this.props.onAdd,children:[Object(x.jsx)("input",{name:"name",type:"text",placeholder:"Enter name"}),Object(x.jsx)("input",{name:"description",type:"text",placeholder:"Enter desc"}),Object(x.jsx)("button",{type:"submit",children:"Submit"})]})}}]),n}(a.Component),D=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={todo:{}},t.handleNameChange=function(e){var n=e.target.value;console.log(n);var a=JSON.parse(JSON.stringify(t.state.todo));a.name=n,t.setState({todo:a})},t.handleDescChange=function(e){var n=e.target.value,a=JSON.parse(JSON.stringify(t.state.todo));a.description=n,t.setState({todo:a})},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.todoId;w.a.get("".concat(C,"/api/todos/").concat(e)).then((function(e){t.setState({todo:e.data})})).catch((function(){console.log("Detail fecth failed")}))}},{key:"render",value:function(){var t=this.state.todo,e=this.props.onEdit;return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onChange:this.handleNameChange,value:t.name}),Object(x.jsx)("input",{type:"text",onChange:this.handleDescChange,value:t.description}),Object(x.jsx)("button",{onClick:function(){e(t)},children:"Submit"})]})}}]),n}(a.Component);var k=function(t){var e=t.onSignIn,n=t.error;return Object(x.jsxs)("form",{onSubmit:e,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(x.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(x.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),n&&Object(x.jsx)("p",{style:{color:"red"},children:n.error})]})};var E=function(t){var e=t.onSubmit;return Object(x.jsxs)("form",{onSubmit:e,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputUsername",children:"Username"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"InputUsername",name:"username"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(x.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"}),Object(x.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(x.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})},U=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={todos:[],user:null,error:null,fetchingUser:!0},t.handleSignUp=function(e){e.preventDefault();var n=e.target,a=n.username,o=n.email,c=n.password,r={username:a.value,email:o.value,password:c.value};w.a.post("".concat(C,"/api/signup"),r,{withCredentials:!0}).then((function(e){t.setState({user:e.data},(function(){t.props.history.push("/")}))})).catch((function(){console.log("SignUp failed")}))},t.handleSignIn=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,o,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a=n.target,o=a.email,c=a.password,r={email:o.value,password:c.value},w.a.post("".concat(C,"/api/signin"),r,{withCredentials:!0}).then((function(e){t.setState({user:e.data,error:null},(function(){t.props.history.push("/")}))})).catch((function(e){t.setState({error:e.response.data})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleLogout=function(){w.a.post("".concat(C,"/api/logout"),{},{withCredentials:!0}).then((function(){t.setState({user:null})})).catch((function(e){t.setState({error:e.response.data})}))},t.handleSubmit=function(e){e.preventDefault();var n=e.target.name.value,a=e.target.description.value;w.a.post("".concat(C,"/api/create"),{name:n,description:a,completed:!1},{withCredentials:!0}).then((function(e){t.setState({todos:[e.data].concat(Object(i.a)(t.state.todos))},(function(){t.props.history.push("/")}))})).catch((function(t){console.log("Create failed",t)}))},t.handleDelete=function(e){w.a.delete("".concat(C,"/api/todos/").concat(e),{withCredentials:!0}).then((function(){var n=t.state.todos.filter((function(t){return t._id!==e}));t.setState({todos:n},(function(){t.props.history.push("/")}))})).catch((function(t){console.log("Delete failed",t)}))},t.handleEditTodo=function(e){w.a.patch("".concat(C,"/api/todos/").concat(e._id),{name:e.name,description:e.description,completed:e.completed},{withCredentials:!0}).then((function(){var n=t.state.todos.map((function(t){return e._id===t._id&&(t.name=e.name,t.description=e.description),t}));t.setState({todos:n},(function(){t.props.history.push("/")}))})).catch((function(t){console.log("Edit failed",t)}))},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this;w.a.get("".concat(C,"/api/todos"),{withCredentials:!0}).then((function(e){console.log(e.data),t.setState({todos:e.data})})).catch((function(){console.log("Fecthing failed")})),w.a.get("".concat(C,"/api/user"),{withCredentials:!0}).then((function(e){t.setState({user:e.data,fetchingUser:!1})})).catch((function(e){t.setState({error:e.response.data,fetchingUser:!1})}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.todos,a=e.error,o=e.user;return e.fetchingUser?Object(x.jsx)("p",{children:"Loading . . . "}):Object(x.jsxs)("div",{children:[Object(x.jsx)(g,{onLogout:this.handleLogout,user:o}),Object(x.jsx)("h1",{children:"Shopping List"}),Object(x.jsxs)(v.d,{children:[Object(x.jsx)(v.b,{exact:!0,path:"/",render:function(){return Object(x.jsx)(y,{todos:n})}}),Object(x.jsx)(v.b,{path:"/todos/:todoId",render:function(e){return Object(x.jsx)(N,Object(s.a)({user:o,onDelete:t.handleDelete},e))}}),Object(x.jsx)(v.b,{path:"/add-form",render:function(){return Object(x.jsx)(I,{onAdd:t.handleSubmit})}}),Object(x.jsx)(v.b,{path:"/todo/:todoId/edit",render:function(e){return Object(x.jsx)(D,Object(s.a)({onEdit:t.handleEditTodo},e))}}),Object(x.jsx)(v.b,{path:"/signin",render:function(e){return Object(x.jsx)(k,Object(s.a)({error:a,onSignIn:t.handleSignIn},e))}}),Object(x.jsx)(v.b,{path:"/signup",render:function(e){return Object(x.jsx)(E,Object(s.a)({onSubmit:t.handleSignUp},e))}})]})]})}}]),n}(a.Component),L=Object(v.g)(U);r.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(O.a,{children:Object(x.jsx)(L,{})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.1e800025.chunk.js.map